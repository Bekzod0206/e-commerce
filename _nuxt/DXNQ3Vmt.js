import{d as D,l as F,y as N,m as V,D as B,r as U,o as i,c,a as p,e as u,B as _,b as l,w as n,F as k,h as d,H as j,n as q,x,q as y,s as I,J as L,v as R}from"./CxxHAsrM.js";/* empty css        *//* empty css        */const A=""+new URL("phoneCart.DnOW3jBn.svg",import.meta.url).href,O={class:"grid grid-cols-2 gap-2 w-[80%] mx-auto"},J={class:"flex items-center justify-center"},W=["src"],G={class:"flex items-center justify-center"},H={class:"w-[400px] flex flex-col items-left justify-center gap-6"},K={key:0,class:"text-4xl font-semibold"},T={key:1,class:"text-4xl font-semibold"},z={class:"text-center text-slate-500"},Z=D({__name:"auth",props:{pageStatus:{}},setup(E){const r=E,v=F(),h=N(),o=V({name:"",email:"",password:""}),b=V({name:[{required:!0,message:"Please input the name",trigger:"blur"}],email:[{required:!0,message:"Please input the Email or phone",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"},{validator:(m,e,s,t,a)=>{e.length<8?s(new Error("Password must contain at least 8 characters")):s()},trigger:"blur"}]}),g=B(null),w=async()=>{let m=!0;const e=[];if(r.pageStatus==="sign-up"&&e.push(new Promise(s=>{var t;(t=g.value)==null||t.validateField("name",a=>{a&&console.error("Validation failed name:",a),s()})})),e.push(new Promise(s=>{var t;(t=g.value)==null||t.validateField("email",a=>{a&&console.error("Validation failed email:",a),s()})})),e.push(new Promise(s=>{var t;(t=g.value)==null||t.validateField("password",a=>{a&&console.error("Validation failed password:",a),s()})})),await Promise.all(e),Object.keys(o).forEach(s=>{const t=s;if(r.pageStatus==="log-in"){if(s!=="name"&&o[t].length===0)return m=!1,!1}else if(o[t].length===0)return m=!1,!1}),m)if(r.pageStatus==="sign-up"){const s={...o,address:"",lastName:"",chosenProducts:[],cartProducts:[]};v.set(s),h.push("/")}else{let s=localStorage.getItem("user");if(console.log(s,"userData"),s){const t=JSON.parse(s);o.email===t.email?o.password===t.password?(v.set(t),h.push("/")):y.error({title:"Error",message:"Password mismatch for the stated user"}):y.error({title:"Error",message:"User doesn't exist"})}else y.error({title:"Error",message:"User doesn't exist"}),h.push("/auth")}else y.warning({title:"Warning",message:"Please, fill up fields"})};return(m,e)=>{const s=I,t=L,a=R,P=U("Icon"),C=j,S=q;return i(),c("div",O,[p("div",J,[p("img",{src:u(A),alt:"phoneCart"},null,8,W)]),p("div",G,[p("div",H,[r.pageStatus==="sign-up"?(i(),c("p",K,"Create an account")):r.pageStatus==="log-in"?(i(),c("p",T,"Log in to Exclusive")):_("",!0),e[11]||(e[11]=p("p",null,"Enter your details below",-1)),l(C,{model:u(o),"status-icon":"",rules:u(b),ref_key:"formRef",ref:g,"label-width":"250px","label-position":"top",class:"demo-formData w-full"},{default:n(()=>[r.pageStatus==="sign-up"?(i(),x(t,{key:0,label:"Name",prop:"name",class:"w-full"},{default:n(()=>[l(s,{modelValue:u(o).name,"onUpdate:modelValue":e[0]||(e[0]=f=>u(o).name=f),autocomplete:"off"},null,8,["modelValue"])]),_:1})):_("",!0),l(t,{label:"Email or phone",prop:"email",class:"w-full"},{default:n(()=>[l(s,{modelValue:u(o).email,"onUpdate:modelValue":e[1]||(e[1]=f=>u(o).email=f),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(t,{label:"Password",prop:"password",class:"w-full"},{default:n(()=>[l(s,{type:"password",modelValue:u(o).password,"onUpdate:modelValue":e[2]||(e[2]=f=>u(o).password=f),"show-password":""},null,8,["modelValue"])]),_:1}),r.pageStatus==="sign-up"?(i(),x(t,{key:1},{default:n(()=>[l(a,{type:"danger",onClick:w,class:"w-full"},{default:n(()=>e[3]||(e[3]=[d("Create Account")])),_:1})]),_:1})):_("",!0),r.pageStatus==="sign-up"?(i(),x(t,{key:2},{default:n(()=>[l(a,{onClick:w,class:"w-full"},{default:n(()=>[l(P,{icon:"logos:google-icon",width:"18",class:"mr-3"}),e[4]||(e[4]=d(" Sign up with Google "))]),_:1})]),_:1})):r.pageStatus==="log-in"?(i(),x(t,{key:3},{default:n(()=>[l(a,{type:"danger",onClick:w,class:"w-[48%]"},{default:n(()=>e[5]||(e[5]=[d("Log in")])),_:1}),l(a,{onClick:w,class:"w-[48%]"},{default:n(()=>e[6]||(e[6]=[d("Forget Password?")])),_:1})]),_:1})):_("",!0)]),_:1},8,["model","rules"]),p("p",z,[r.pageStatus==="sign-up"?(i(),c(k,{key:0},[e[8]||(e[8]=d(" Already have an account ")),l(S,{to:"/login",class:"ml-2 underline"},{default:n(()=>e[7]||(e[7]=[d(" Log in ")])),_:1})],64)):(i(),c(k,{key:1},[e[10]||(e[10]=d(" Don't have an account ")),l(S,{to:"/auth",class:"ml-2 underline"},{default:n(()=>e[9]||(e[9]=[d(" Sign up ")])),_:1})],64))])])])])}}});export{Z as _};
